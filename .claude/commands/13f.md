---
description: Run 13F analysis commands for hedge fund filings
---

You are the 13F Analysis assistant. Help the user analyze hedge fund 13F filings.

**To discover available funds:** Run `13f list-funds` to see currently tracked funds.

**Your capabilities:**
- Pull latest 13F filings from SEC EDGAR
- Generate portfolio analysis reports
- Compare holdings across funds
- Track quarter-over-quarter changes
- Identify thesis signals (accumulation, trimming, new positions)
- Look up institutional holders of any stock
- Track stocks and show quarterly shareholder changes

**How to respond:**
1. Parse the user's natural language request: $ARGUMENTS
2. Determine which CLI command(s) to run
3. Execute via: `13f <command>` (the CLI is installed globally via pip)
4. Summarize the results in plain English

**Example mappings:**
- "pull all funds" → `13f pull --all`
- "show Coatue's portfolio" → `13f report --fund "Coatue Management"`
- "compare Coatue and Altimeter" → `13f universe-report --funds "Coatue Management,Altimeter Capital"`
- "what's new in Coatue's portfolio" → run report, highlight new_positions from diff
- "list funds" → `13f list-funds`
- "check for updates" → `13f check-new`
- "check for new filings and pull them" → `13f check-new --pull`
- "when are filings due" → `13f calendar`
- "enable automatic checks" → `13f schedule --enable`
- "show schedule status" → `13f schedule --status`
- "who owns TSM?" → `13f stock TSM`
- "show TSM shareholders over time" → `13f stock TSM --history`
- "which stocks am I tracking?" → `13f list-stocks`
- "stop tracking NVDA" → `13f remove-stock NVDA`

---

# 13F Analysis Skill

Deterministic 13F ingestion and analysis tool for tracking hedge fund holdings.

## Quick Reference

| Command | Description |
|---------|-------------|
| `help` | Show this help message |
| `list-funds` | List all tracked funds |
| `add-fund` | Add a fund to track |
| `remove-fund` | Remove a fund |
| `pull` | Fetch 13F filings from SEC EDGAR |
| `report` | Generate analysis report for a fund |
| `compare` | Compare two periods for a fund |
| `universe-report` | Cross-fund comparison report |
| `export` | Export data to CSV/Parquet |
| `lookup-cik` | Look up CIK by company name |
| `check-new` | Check for new filings not yet in database |
| `calendar` | Show 13F filing calendar and deadlines |
| `schedule` | Manage automatic daily checks (macOS) |
| `stock` | Look up institutional holders of a stock |
| `list-stocks` | List all tracked stocks |
| `add-stock` | Add a stock to tracking |
| `remove-stock` | Remove a stock and delete its data |

## Commands

### help
Show available commands and usage.
```
/13f help
```

### list-funds
List all funds currently being tracked.
```
/13f list-funds
```

### add-fund
Add a new fund to the tracking list.
```
/13f add-fund --name "Fund Name" --cik "0001234567" [--tags "tag1,tag2"]
```
**Options:**
- `--name` (required): Display name for the fund
- `--cik` (required): SEC CIK number (10 digits, with or without leading zeros)
- `--tags`: Comma-separated tags (e.g., "tiger-cub,tech")

### remove-fund
Remove a fund from tracking (also deletes stored data).
```
/13f remove-fund --name "Fund Name"
```

### pull
Fetch 13F filings from SEC EDGAR and store in database.
```
/13f pull --fund "Fund Name" [--periods 5]
/13f pull --all [--periods 5] [--original-only] [--skip-stocks]
```
**Options:**
- `--fund`: Specific fund to pull
- `--all`: Pull all tracked funds AND update all tracked stocks
- `--periods`: Number of quarters to fetch (default: 5 = latest + 4 prior)
- `--original-only`: Ignore amendments, only fetch original filings
- `--skip-stocks`: Skip updating tracked stocks (only with --all)

### report
Generate a comprehensive analysis report for a fund.
```
/13f report --fund "Fund Name" [--period latest] [-o output.md]
```
**Options:**
- `--fund` (required): Fund name
- `--period`: Specific period (e.g., "2025-09-30") or "latest" (default)
- `-o, --output`: Save to file instead of stdout

**Report includes:**
- Portfolio map (top 10, clusters, small positions)
- Changes by $ value, growth rate, and portfolio impact
- Thesis signals (accumulator, build-then-trim, probes, etc.)
- Year-to-date view with starter→scale analysis

### compare
Compare two specific periods for a fund (outputs JSON diff).
```
/13f compare --fund "Fund Name" --from 2025Q2 --to 2025Q3
```
**Options:**
- `--fund` (required): Fund name
- `--from` (required): Start quarter (e.g., "2025Q2")
- `--to` (required): End quarter (e.g., "2025Q3")

### universe-report
Generate cross-fund comparison report.
```
/13f universe-report --funds "Fund1,Fund2,Fund3" [--period latest] [-o output.md]
```
**Options:**
- `--funds` (required): Comma-separated fund names
- `--period`: Period to analyze (default: latest)
- `-o, --output`: Save to file

**Report includes:**
- Overlapping holdings across funds
- Shared adds/cuts
- Divergent bets (one adding, another cutting)
- Common starter probes
- Concentration comparison
- Cluster exposure comparison

### export
Export fund data to CSV or Parquet format.
```
/13f export --fund "Fund Name" --format csv [-o ./output/]
```
**Options:**
- `--fund` (required): Fund name
- `--format`: "csv" (default) or "parquet"
- `-o, --output`: Output directory

### lookup-cik
Best-effort CIK lookup by company name.
```
/13f lookup-cik --name "Company Name"
```

### check-new
Check for new 13F filings not yet in database.
```
/13f check-new
/13f check-new --pull
/13f check-new --pull --notify
```
**Options:**
- `--pull`: Automatically pull any new filings found
- `--notify`: Send macOS notification when done

**Output:**
Shows a table comparing your database vs SEC EDGAR, indicating which funds have new filings available.

### calendar
Show 13F filing calendar and expected dates.
```
/13f calendar
```
**Output:**
Shows filing deadlines for each quarter, with the current filing window marked.

### schedule
Manage automatic 13F filing checks (macOS launchd).
```
/13f schedule --status
/13f schedule --enable
/13f schedule --enable --hour 8
/13f schedule --disable
```
**Options:**
- `--status`: Show current schedule status (default if no option given)
- `--enable`: Enable daily automatic checks at specified time
- `--disable`: Disable automatic checks
- `--hour`: Hour to run (24-hour format, default 9)
- `--minute`: Minute to run (default 0)

When enabled, runs `13f check-new --pull --notify` daily at the specified time.

### stock
Look up institutional holders of a stock by ticker, CUSIP, or company name.
```
/13f stock TSM
/13f stock TSM --history
/13f stock "Taiwan Semiconductor"
/13f stock 874039100  # CUSIP
```
**Options:**
- `--history`: Show quarterly trends and movement analysis
- `--no-exclude-passive`: Include passive funds (Vanguard, BlackRock, etc.)
- `-o, --output`: Save report to file
- `-y, --yes`: Skip confirmation prompts

**Behavior:**
- First query adds the stock to tracking (with storage estimate confirmation)
- Subsequent queries are instant from local cache
- Data is automatically updated when running `pull --all`
- Filters to positions >$50M to focus on significant holders
- Excludes passive index funds by default (configurable in `data/passive_funds.yaml`)

**Report includes:**
- Top institutional holders with position size and type
- Your tracked hedge funds' positions highlighted
- Quarter-over-quarter changes (with --history)
- New positions, exits, increases, and decreases

### list-stocks
List all stocks currently being tracked.
```
/13f list-stocks
```
**Output:** Shows ticker, name, quarters stored, holder count, storage used, and date added.

### add-stock
Explicitly add a stock to tracking without generating a report.
```
/13f add-stock NVDA
/13f add-stock CUSTOM --cusip "12345678" --name "Custom Corp"
```
**Options:**
- `--cusip`: CUSIP if known (for securities not in built-in mappings)
- `--name`: Issuer name if known

### remove-stock
Remove a stock from tracking and delete all its stored data.
```
/13f remove-stock TSM
/13f remove-stock TSM -y
```
**Options:**
- `-y, --yes`: Skip confirmation prompt

**Behavior:** Shows storage that will be freed and asks for confirmation.

## Discovering Funds

Run `13f list-funds` to see the currently tracked funds. Use `13f add-fund` to add new funds.

## Example Workflows

### Initial Setup
```
/13f list-funds
/13f pull --all
```

### Analyze a Single Fund
```
/13f report --fund Coatue
```

### Compare Funds
```
/13f universe-report --funds "Fund1,Fund2,Fund3"
```
(Use actual fund names from `13f list-funds`)

### Track Quarter-over-Quarter Changes
```
/13f compare --fund "Fund Name" --from 2025Q2 --to 2025Q3
```

### Add a New Fund
```
/13f add-fund --name "New Fund" --cik "0001234567" --tags "tech,growth"
/13f pull --fund "New Fund"
```

### Look Up Stock Holders
```
/13f stock TSM              # Who owns Taiwan Semi?
/13f stock TSM --history    # Quarterly shareholder changes
```

### Track Multiple Stocks
```
/13f stock NVDA             # First query adds to tracking
/13f stock AAPL
/13f list-stocks            # See all tracked stocks
/13f pull --all             # Updates both funds and stocks
```

### Remove a Stock
```
/13f remove-stock TSM       # Shows storage freed and confirms
```

## Data Storage

- **Database:** `data/13f.db` (SQLite) - fund holdings
- **Cache:** `data/cache/` (raw SEC responses)
- **Artifacts:** `artifacts/<run_id>/` (exports per pull)
- **Fund Config:** `data/funds.yaml` (tracked fund list)
- **Stock Config:** `data/tracked_stocks.yaml` (tracked stock list)
- **Stock Holdings:** `data/stock_holdings/<ticker>/<quarter>.json` (~12KB per quarter)
- **CUSIP Mappings:** `data/cusip_mappings.json` (user-added ticker mappings)
- **Passive Funds:** `data/passive_funds.yaml` (excluded from stock reports)

## Execution

```bash
13f $ARGUMENTS
```
